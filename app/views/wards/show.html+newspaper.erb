<%
  mapped_count = @prabhags.select { |p| p.boundary_geojson.present? }.count
  total_facilities = @facility_type_counts.values.sum
%>

<div class="max-w-6xl mx-auto py-8 px-4">

  <!-- Masthead -->
  <div class="mb-2">
    <%= link_to "\u2190 All Wards", wards_path, class: "text-sm text-stone-400 hover:text-stone-600 transition-colors" %>
  </div>
  <h1 class="newspaper-masthead text-5xl text-stone-900 mb-2">
    Ward <%= @ward.ward_code %>
  </h1>
  <p class="text-xs uppercase tracking-widest text-stone-400 mb-1">
    Mumbai Municipal Corporation
  </p>
  <div class="newspaper-rule-thick mb-3"></div>
  <p class="text-sm text-stone-500 mb-6">
    <%= @prabhags.count %> Prabhags
    · <%= mapped_count %>/<%= @prabhags.count %> mapped
    <% if total_facilities > 0 %>
      · <%= total_facilities %> facilities tracked
    <% end %>
    <% if @ward.population_estimate.present? %>
      · Pop. <%= number_with_delimiter(@ward.population_estimate) %>
    <% end %>
  </p>

  <!-- Tab Content (news rendered inline as default) -->
  <%= render template: "wards/news" %>

  <!-- Footer Links -->
  <div class="newspaper-rule mb-6"></div>
  <div class="flex justify-center gap-8 text-sm text-stone-500">
    <%= link_to "Browse all prabhags", ward_prabhags_path(@ward.ward_code),
                class: "hover:text-stone-800 underline" %>
    <a href="https://portal.mcgm.gov.in" target="_blank" class="hover:text-stone-800 underline">
      MCGM Portal
    </a>
  </div>

</div>
